<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Stopeças — Início</title>
  <link rel="stylesheet" href="css/style.css">
  <script src="js/busca.js" defer></script>
</head>
<body>
  <header class="site-header">
    <div class="header-topo">
      <a class="logo">Stopeças</a>
      <nav class="main-nav" aria-label="principal">
        <ul class="nav-list">
          <li><a href="produto.html">Produtos</a></li>
          <li><a href="login.html">Login</a></li>
          <li><a href="suporte.html">Suporte</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <section class="promo-carolsel">
    <div class="carousel-slide">
      <h2>Promoções da Semana</h2>
      <p>As melhores peças com segurança e confiança.</p>
    </div>
  </section>

  <section class="search-bar">
    <form id="formBusca" class="free-search">
      <input type="text" id="campoBusca" placeholder="Buscar por código ou nome da peça">
      <button type="submit">Pesquisar</button>
    </form>
  </section>

  <section class="categories">
    <h3>Categorias</h3>
    <ul class="category-list">
      <li><button data-cat="Motor">Motor</button></li>
      <li><button data-cat="Freios">Freios</button></li>
      <li><button data-cat="Elétrica">Elétrica</button></li>
      <li><button data-cat="Suspensão">Suspensão</button></li>
    </ul>
  </section>


  <section class="featured-prducts">
    <h3>Promoções</h3>
   <!-- index.html (trecho) -->
<div id="lista-produtos"></div>

<script>
const API = 'http://localhost:3000/api/produtos';

async function carregarIndex() {
  try {
    const res = await fetch(API);
    const produtos = await res.json();
    const container = document.getElementById('lista-produtos');
    container.innerHTML = produtos.map(p => `
      <div class="produto-card" data-id="${p.id}">
        <img src="${p.imagem}" alt="${p.nome}" style="max-width:150px"/>
        <h3>${p.nome}</h3>
        <p>R$ ${Number(p.preco).toFixed(2)}</p>
        <button onclick="verDetalhes(${p.id})">Ver Detalhes</button>
        <button onclick="adicionarAoCarrinho(${p.id})">Adicionar ao Carrinho</button>
      </div>
    `).join('');
  } catch (err) {
    console.error(err);
  }
}

function verDetalhes(id) {
  window.location.href = `detalhes.html?id=${id}`;
}

function adicionarAoCarrinho(id) {
  const carrinho = JSON.parse(localStorage.getItem('carrinho') || '[]');
  const item = carrinho.find(i => i.id === id);
  if (item) item.qtd++;
  else carrinho.push({ id, qtd: 1 });
  localStorage.setItem('carrinho', JSON.stringify(carrinho));
  alert('Produto adicionado ao carrinho');
}

document.addEventListener('DOMContentLoaded', carregarIndex);
</script>


<footer class="site-footer">
    <p>&copy; Stopeças 2025 - Todos os direitos reservados</p>
  </footer>

</body>
</html>
